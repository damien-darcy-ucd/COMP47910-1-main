<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:insert="fragments/head :: head"></head>

<body class="index-page">
<div th:replace="fragments/navbar:: navbar"></div>

<div class="wrapper">
    <section class="section-profile-cover section-shaped my-0">
        <!-- Circles background -->
        <img class="bg-image" src="/images/pages/mohamed.jpg" style="width: 100%" />

        <!-- SVG separator -->
        <div class="separator separator-bottom separator-skew">
            <svg
                    x="0"
                    y="0"
                    viewBox="0 0 2560 100"
                    preserveAspectRatio="none"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
            >
                <polygon class="fill-secondary" points="2560 0 2560 100 0 100"></polygon>
            </svg>
        </div>
    </section>
    <section class="section bg-secondary profile-page">
        <div class="container mt-3">
            <div class="card card-profile shadow mt--300">
                <div class="px-4">
                    <div class="row justify-content-center">
                        <div class="col-lg-3 order-lg-2">
                            <div class="card-profile-image">
                                <a href="#">
                                    <img
                                            th:src="${'https://eu.ui-avatars.com/api/?name=' + userProfile.getFullName()}"
                                            class="rounded-circle"
                                    />
                                </a>
                            </div>
                        </div>
                        <div class="col-lg-4 order-lg-3 text-lg-right align-self-lg-center">
                            <!-- It's one or the other here (or none), depending on who's viewing the page -->
                            <div class="card-profile-actions py-4 mt-lg-0 row justify-content-end">
                                <a href="/logout" th:if="${isSelf}" class="btn btn-default">
                                    <span class="btn-inner--icon">
                                        <i class="fa fa-sign-out mr-1"></i>
                                    </span>
                                    Log out
                                </a>
                            </div>
                        </div>

                        <div class="col-lg-4 order-lg-1">
                            <div class="card-profile-stats d-flex justify-content-center">
                                <div>
                                    <span class="heading" th:text="${userDoses}">0</span>
                                    <span class="description">Doses</span>
                                </div>
                                <div>
                                    <span class="heading" th:text="${userQuestions}">0</span>
                                    <span class="description">Questions</span>
                                </div>
                                <div>
                                    <span class="heading" th:text="${userAppts}">0</span>
                                    <span class="description">Appointments</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-5">
                        <h3>
                            <span th:text="${userProfile.getFullName()}">John Doe</span>,
                            <span class="font-weight-light" th:text="${userProfile.getAge()}">45</span>
                        </h3>
                        <div
                                th:if="${isSelf == true || (userSession.isLoggedIn() && userSession.getUser().isAdmin())}"
                                class="h6 font-weight-300"
                        >
                            <i class="ni location_pin mr-2"></i>
                            <span th:text="${userProfile.getAddress()}">Bucharest, Romania</span>
                        </div>
                    </div>

                    <div class="mt-4">
                        <div th:replace="fragments/alert :: alert"></div>
                    </div>

                    <div class="mt-5 py-5">
                        <h4>Notifications</h4>
                        <table class="table mt-4">
                            <thead>
                            <tr>
                                <th class="text-center">#</th>
                                <th>Type</th>
                                <th>Date</th>
                                <th>Time</th>
                                <th>Message</th>
                                <th>Status</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="notification, iterStat: ${notifications}">
                                <td class="text-center" th:text="${iterStat.index + 1}"></td>

                                <td th:if="${notification.getType() == 1 || notification.getType() == 4}">
                                    <i class="fa fa-lg fa-bullhorn mr-1"></i> Forum
                                </td>
                                <td th:if="${notification.getType() == 2 || notification.getType() == 3}">
                                    <i class="fa fa-lg fa-bell mr-1"></i> Appointment
                                </td>

                                <td th:text="${notification.getDate()}"></td>
                                <td th:text="${notification.getTime().getHour() + ':' + notification.getTime().getMinute()}"></td>
                                <td th:text="${notification.getMessage()}"></td>

                                <td th:if="${notification.isRead()}" class="text-center">
                                    <a th:href="${notification.getUrl()}"><i class="fa fa-lg fa-envelope-open-text text-secondary"></i></a>
                                </td>
                                <td th:if="${!notification.isRead()}" class="text-center">
                                    <a th:href="${notification.getUrl()}"><i class="fa fa-lg fa-envelope text-danger"></i></a>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <footer th:insert="fragments/footer :: footer"></footer>
</div>
</body>
</html>
